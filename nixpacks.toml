[phases.setup]
nixPkgs = ["nodejs-18_x"]

[phases.install]
cmds = [
  "pwd",
  "ls -la",
  "test -f package.json || (echo 'ERROR: package.json not found!' && exit 1)",
  "npm run install-all"
]

[phases.build]
cmds = [
  "npm run build"
]

[start]
cmd = "sh -c 'cd /app && pwd && ls -la && if [ -f package.json ]; then npm start; elif [ -f server/index.js ]; then node server/index.js; else echo \"ERROR: Cannot find package.json or server/index.js\" && exit 1; fi'"

